<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="refresh" content="600" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clima PUC</title>
    <link
      rel="icon"
      href="{{ url_for('static', filename='clima.png') }}"
      type="image/png"
    />
    <!-- Pré-conexão para otimizar carregamento de ícones e fontes -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* RESET */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Open-Sans", sans-serif;
        background: #1f2a44;
        color: #fff;
        min-height: 100vh;
      }
      /* SIDEBAR */
      .sidebar {
        position: fixed;
        width: 80px;
        height: 100vh;
        background-color: #2a3550;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px 0;
        transition: transform 0.2s ease-in-out;
        z-index: 1000;
      }
      .sidebar.hide {
        transform: translateX(-100%);
      }
      .sidebar img {
        width: 80px;
        margin-bottom: 30px;
      }
      .sidebar .nav-item {
        margin: 20px 0;
        cursor: pointer;
        color: #fff;
      }
      .sidebar .nav-item a {
        color: inherit;
        text-decoration: none;
      }
      .sidebar .nav-item i {
        font-size: 1.8em;
      }
      .sidebar-toggle {
        display: flex;
        align-items: center;
        gap: 5px;
        margin-bottom: 20px;
      }
      .sidebar-toggle span {
        font-size: 1em;
      }
      .sidebar-toggle label {
        display: flex;
        align-items: center;
        cursor: pointer;
      }
      .sidebar-toggle .slider {
        width: 40px;
        height: 20px;
        background-color: #ccc;
        border-radius: 25px;
        position: relative;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      .sidebar-toggle .slider:before {
        content: "";
        position: absolute;
        width: 16px;
        height: 16px;
        background-color: #fff;
        border-radius: 50%;
        top: 2px;
        left: 2px;
        transition: transform 0.2s;
      }
      input[type="checkbox"] {
        display: none;
      }
      input[type="checkbox"]:checked + .slider {
        background-color: #02d7fd;
      }
      input[type="checkbox"]:checked + .slider:before {
        transform: translateX(25px);
      }
      .sidebar-btn {
        background: none;
        border: none;
        color: #fff;
        font-size: 2em;
        cursor: pointer;
      }
      /* CONTEÚDO PRINCIPAL */
      .main-content {
        margin-left: 80px;
        padding: 15px;
        transition: margin-left 0.3s ease-in-out;
      }
      .top-bar {
        display: flex;
        align-items: center;
        margin-bottom: 5px;
      }
      .top-bar h1 {
        font-size: 3em;
        text-align: center;
        flex-grow: 1;
      }
      /* Elemento dummy para balancear o layout */
      .top-bar .dummy {
        width: 2.2em; /* Ajuste esse valor conforme o tamanho do botão */
      }
      .menu-btn {
        background: none;
        border: none;
        color: #fff;
        font-size: 2em;
        cursor: pointer;
      }
      /* CARD DE CLIMA ATUAL */
      .current-weather {
        background-color: #2f3b58;
        border-radius: 20px;
        padding: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 20px;
      }
      .current-weather .temperature {
        font-size: 10em;
        margin: 0;
      }
      .current-weather .temperature-status {
        font-size: 2em;
        margin-bottom: 10px;
        text-align: center;
        color: rgba(255, 255, 255, 0.8);
      }
      /* CARDS DE CONDIÇÕES */
      .conditions {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
      }
      .condition-card {
        background-color: #2f3b58;
        border-radius: 10px;
        padding: 20px;
        flex: 1 1 calc(50% - 15px);
        min-width: 260px;
        text-align: center;
      }
      .condition-card i {
        font-size: 2.5em;
        margin-bottom: 5px;
      }
      .condition-card h3 {
        font-size: 1.8em;
        margin-bottom: 3px;
        color: #ffd700;
      }
      .condition-card p {
        font-size: 1.5em;
        margin: 3px 0;
      }
      /* LEGENDAS */
      .legend {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.9em;
      }
      /* RODAPÉ */
      .footer {
        text-align: center;
        margin-top: 20px;
        color: #ccc;
        font-size: 1.5em;
      }
      /* RESPONSIVIDADE */
      @media (max-width: 768px) {
        .top-bar h1 {
          font-size: 1.8em;
        }
        .current-weather .temperature {
          font-size: 6em;
        }
        .current-weather .temperature-status {
          font-size: 1.8em;
        }
        .condition-card {
          min-width: 280px;
          padding: 30px;
        }
        .condition-card h3 {
          font-size: 2em;
        }
        .condition-card p {
          font-size: 1.5em;
        }
      }
      .sidebar.hide + .main-content {
        margin-left: 0;
      }
    </style>
  </head>
  <body>
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <img
        src="{{ url_for('static', filename='loguinho.png') }}"
        alt="PUC Logo"
      />
      <!-- Toggle de temperatura -->
      <div class="sidebar-toggle">
        <span>°C</span>
        <label>
          <input
            type="checkbox"
            id="toggleTemp"
            onclick="toggleTemperature()"
          />
          <span class="slider"></span>
        </label>
        <span>°F</span>
      </div>
      <!-- Navegação -->
      <div class="nav-item">
        <a href="/temperatura" title="Gráfico de Temperatura">
          <i class="fas fa-thermometer-half"></i>
        </a>
      </div>
      <div class="nav-item">
        <a href="/dados" title="Dashboard de Dados">
          <i class="fas fa-chart-line"></i>
        </a>
      </div>
    </aside>

    <!-- CONTEÚDO PRINCIPAL -->
    <div class="main-content" id="mainContent">
      <div class="top-bar">
        <button class="menu-btn" onclick="toggleSidebarVisibility()">
          <i class="fas fa-bars"></i>
        </button>
        <h1>Clima PUC</h1>
        <!-- Elemento "dummy" para balancear o layout -->
        <div class="dummy"></div>
      </div>

      <!-- CARD DE CLIMA ATUAL -->
      <div class="current-weather">
        <h2 class="temperature" data-temp="{{ temperature|round(1) }}">
          {{ "%.f"|format(temperature) }}°C
        </h2>
        <p class="temperature-status">{{ temperature_status }}</p>
      </div>

      <!-- CARDS DE CONDIÇÕES -->
      <div class="conditions">
        <div class="condition-card">
          <i class="fas fa-tint" style="color: #ffd700"></i>
          <h3>Umidade</h3>
          <p>{{ "%.f"|format(humidity) }}%</p>
          <p class="legend">{{ humidity_status }}</p>
        </div>
        <div class="condition-card">
          <i class="fas fa-cloud-showers-heavy" style="color: #ffd700"></i>
          <h3>Chuva</h3>
          <p>{{ "%.3f"|format(rain_level) }} mm</p>
          <p class="legend">{{ rain_status }}</p>
        </div>
        <div class="condition-card">
          <i class="fas fa-wind" style="color: #ffd700"></i>
          <h3>Vento</h3>
          <p>{{ "%.f"|format(wind_speed_kmh) }} km/h - {{ wind_direction }}</p>
          <p class="legend">{{ wind_speed_status }}</p>
        </div>
        <div class="condition-card">
          <i class="fas fa-sun" style="color: #ffd700"></i>
          <h3>Radiação UV</h3>
          <p>{{ "%.f"|format(uv_index) }}</p>
          <p class="legend">{{ uv_status }}</p>
        </div>
      </div>

      <!-- RODAPÉ -->
      <div class="footer">
        <p>
          Desenvolvido por alunos da <strong>PUC</strong>. Todos os direitos
          reservados.
        </p>
      </div>
    </div>

    <!-- SCRIPT PARA TOGGLE DE TEMPERATURA E SIDEBAR -->
    <script>
      function toggleTemperature() {
        const toggle = document.getElementById("toggleTemp");
        const tempElements = document.querySelectorAll(".temperature");
        tempElements.forEach((element) => {
          let originalTemp = parseFloat(element.getAttribute("data-temp")) || 0;
          let convertedTemp;
          if (toggle.checked) {
            // Converter Celsius para Fahrenheit
            convertedTemp = (originalTemp * 9) / 5 + 32;
            element.textContent = convertedTemp.toFixed(1) + "°F";
          } else {
            // Converter Fahrenheit para Celsius
            convertedTemp = ((originalTemp - 32) * 5) / 9;
            element.textContent = Math.round(convertedTemp) + "°C";
          }
          element.setAttribute("data-temp", convertedTemp.toFixed(1));
        });
      }
      function toggleSidebarVisibility() {
        const sidebar = document.getElementById("sidebar");
        const mainContent = document.getElementById("mainContent");
        sidebar.classList.toggle("hide");
        mainContent.style.marginLeft = sidebar.classList.contains("hide")
          ? "0"
          : "80px";
      }
    </script>
  </body>
</html>
